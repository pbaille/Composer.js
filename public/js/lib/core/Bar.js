// Generated by CoffeeScript 1.6.3
(function() {
  define(["lib/core/RVal", "vendors/ruby"], function() {
    var RVal, root;
    if (typeof global !== "undefined" && global !== null) {
      root = global.AC.Core;
    } else {
      root = window.AC.Core;
    }
    RVal = AC.Core.RVal;
    return root.Bar = (function() {
      function Bar(opt) {
        this.bpm = opt.bpm;
        this.beats = opt.beats;
        this.beat_val = opt.beat_val;
        this.resolution = opt.resolution || null;
        this.bpm_directives = opt.bpm_directives || [];
      }

      Bar.prototype.duration = function() {
        return this.beat_val.times(this.beats);
      };

      Bar.prototype.ms_duration = function() {
        if (_a.empty(this.bpm_directives)) {
          return this.duration().times(new RVal(60, this.bpm)).toFloat() * 1000;
        } else {
          return "not yet implemented";
        }
      };

      Bar.prototype.ms_duration_at = function(sub) {
        var res;
        if (_a.empty(this.bpm_directives)) {
          if (sub.isZero()) {
            return 0;
          }
          res = sub.div(this.duration()).toFloat() * this.ms_duration();
          return res;
        } else {
          return "not yet implemented";
        }
      };

      return Bar;

    })();
  });

}).call(this);
