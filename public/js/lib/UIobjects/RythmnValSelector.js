// Generated by CoffeeScript 1.6.3
(function() {
  var RVS;

  RVS = (function() {
    function RVS(opt) {
      var b, buttons, el, i, _fn, _i, _len,
        _this = this;
      el = $(opt.el);
      el.addClass("rythmn_val_selector");
      el.html(window.JST['template_first']);
      buttons = el.find(".button");
      this.buttons = {};
      this.table = {};
      _fn = function(b, i) {
        var button_value;
        button_value = $(b).attr("value");
        _this.buttons[button_value] = new PB.CycleButton({
          mother: b,
          items: ["", "", "", ""],
          values: [0, 1, 2, 3],
          colors: ["#423A38", "#BDB9B1", "#47B8C8", "#D7503E"],
          current: 0
        });
        console.log(_this.buttons[i]);
        return $(b).click(function() {
          return _this.table[button_value] = _this.buttons[button_value].get_val();
        });
      };
      for (i = _i = 0, _len = buttons.length; _i < _len; i = ++_i) {
        b = buttons[i];
        _fn(b, i);
      }
      this.buttons[16].set_val(3);
      this.set_table({
        2: 2,
        7: 2
      });
    }

    RVS.prototype.set_table = function(obj) {
      this.table = obj;
      console.log(this.table);
      return this.refresh_buttons();
    };

    RVS.prototype.refresh_buttons = function() {
      var k, v, _ref, _results;
      _ref = this.table;
      _results = [];
      for (k in _ref) {
        v = _ref[k];
        console.log(k);
        console.log(v);
        _results.push(this.buttons[k].set_val(v));
      }
      return _results;
    };

    return RVS;

  })();

  jQuery(function($) {
    return window.rvs = new RVS({
      el: "#rvs"
    });
  });

}).call(this);
